<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/community.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<w2:dataMap baseNode="map" id="dma_postForm">
        			<w2:keyInfo>
        				<w2:key id="type" name="구분" dataType="text"></w2:key>
        				<w2:key id="category1" name="카테고리1" dataType="text"></w2:key>
        				<w2:key id="category2" name="카테고리2" dataType="text"></w2:key>
        				<w2:key id="title" name="제목" dataType="text"></w2:key>
        				<w2:key id="isDisplayed" name="전시여부" dataType="text"></w2:key>
        				<w2:key id="displayStart" name="전시시작일시" dataType="text"></w2:key>
        				<w2:key id="displayEnd" name="전시종료일시" dataType="text"></w2:key>
        				<w2:key id="content" name="내용" dataType="text"></w2:key>
        				<w2:key id="travelPlace1" name="추천여행지1" dataType="text"></w2:key>
        				<w2:key id="travelPlace2" name="추천여행지2" dataType="text"></w2:key>
        				<w2:key id="travelPlace3" name="추천여행지3" dataType="text"></w2:key>
        				<w2:key id="travelPlace4" name="추천여행지4" dataType="text"></w2:key>
        				<w2:key id="travelPlace5" name="추천여행지5" dataType="text"></w2:key>
        				<w2:key id="pcImageOriginalName" name="pc이미지 원본 이름" dataType="text"></w2:key>
        				<w2:key id="pcImageUploadedName" name="pc이미지 업로드이름" dataType="text"></w2:key>
        				<w2:key id="pcImageAltText" name="pc 이미지 대체텍스트" dataType="text"></w2:key>
        				<w2:key id="pcImageUrl" name="pc 이미지 url" dataType="text"></w2:key>
        				<w2:key id="pcImageSize" name="pc이미지 사이즈" dataType="text"></w2:key>
        				<w2:key id="mobileImageOriginalName" name="모바일 이미지 원본이름" dataType="text"></w2:key>
        				<w2:key id="mobileImageUploadedName" name="모바일 이미지 업로드 이름" dataType="text"></w2:key>
        				<w2:key id="mobileImageUrl" name="모바일 이미지 url" dataType="text"></w2:key>
        				<w2:key id="mobileImageAltText" name="모바일 이미지 대체텍스트" dataType="text"></w2:key>
        				<w2:key id="mobileImageSize" name="모바일 이미지 사이즈" dataType="text"></w2:key>
        				<w2:key id="attachmentUrl" name="첨부파일 url" dataType="text"></w2:key>
        				<w2:key id="attachmentOriginalName" name="첨부파일 원본 이름" dataType="text"></w2:key>
        				<w2:key id="attachmentUploadedName" name="첨부파일 업로드 이름" dataType="text"></w2:key>

        				<w2:key id="attachmentSize" name="첨부파일 사이즈" dataType="text"></w2:key>
        				<w2:key id="sourceMedia1" name="출처매체1" dataType="text"></w2:key>
        				<w2:key id="sourceMedia2" name="출처매체2" dataType="text"></w2:key>
        				<w2:key id="sourceMedia3" name="출처매체3" dataType="text"></w2:key>









        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataList baseNode="list" id="dlt_categoryList1d" repeatNode="map" saveRemovedData="true" style="">
        			<w2:columnInfo>
        				<w2:column dataType="text" id="categoryId" name="카테고리 id"></w2:column>
        				<w2:column dataType="text" id="categoryName" name="카테고리 이름"></w2:column>
        			</w2:columnInfo>
        			<w2:data use="false"></w2:data>
        		</w2:dataList>
        		<w2:dataList baseNode="list" id="dlt_categoryList2d" repeatNode="map" saveRemovedData="true" style="">
        			<w2:columnInfo>
        				<w2:column dataType="text" id="categoryId" name="카테고리 id"></w2:column>
        				<w2:column dataType="text" id="categoryName" name="카테고리 이름"></w2:column>
        			</w2:columnInfo>
        			<w2:data use="false"></w2:data>
        		</w2:dataList>
        		<w2:dataMap baseNode="map" id="dma_parentCategory" style="">
        			<w2:keyInfo>
        				<w2:key dataType="text" id="parentId" name="카테고리 id"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataList baseNode="map" id="dlt_travelPlaceList" style="">
        			<w2:columnInfo>
        				<w2:column dataType="text" id="check" name="체크여부"></w2:column>
        				<w2:column dataType="text" id="travelPlaceName" name="장소"></w2:column>
        				<w2:column id="addr" name="주소" dataType="text"></w2:column><w2:column id="detailAddr" name="상세주소" dataType="text"></w2:column><w2:column dataType="text" id="createdAt" name="등록일시"></w2:column>
        				<w2:column dataType="text" id="createdBy" name="등록자"></w2:column>
        				<w2:column dataType="text" id="updatedAt" name="수정일시"></w2:column>
        				<w2:column dataType="text" id="updatedBy" name="수정자"></w2:column>
        				<w2:column dataType="text" id="travelPlaceId" name="장소 id"></w2:column>
        				
        				
        			</w2:columnInfo>
        		</w2:dataList>
        	</w2:dataCollection>
        	<w2:workflowCollection />
        	<xf:submission id="sbm_categoryList1d" ref="" target='data:json,{"id":"dlt_categoryList1d","key":"categoryList1d"}'
        		action="http://127.0.0.1:8080/category" method="get" mediatype="application/json" encoding="UTF-8" instance="" replace=""
        		errorHandler="" customHandler="" mode="synchronous" processMsg="" ev:submit="" ev:submitdone="" ev:submiterror=""
        		abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_categoryList2d" ref='data:json,{"id":"dma_parentCategory","key":"parentCategory"}'
        		target='data:json,{"id":"dlt_categoryList2d","key":"categoryList2d"}' action="http://127.0.0.1:8080/category/child" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_createPost" ref='data:json,{"id":"dma_postForm","key":"postForm"}' target=""
        		action="http://127.0.0.1:8080/post" method="post" mediatype="application/json" encoding="UTF-8" instance="" replace=""
        		errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger=""
        		singleMode="true">
        	</xf:submission>
        	<xf:submission id="sbm_deleteFilePc" ref="data:json,dma_postForm" target="" action="http://127.0.0.1:8080/file/pc"
        		method="delete" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler=""
        		mode="asynchronous" processMsg="" singleMode="true" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_deleteFileMo" ref="data:json,dma_postForm" target="" action="http://127.0.0.1:8080/file/mobile"
        		method="delete" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler=""
        		mode="asynchronous" processMsg="" singleMode="true" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_deleteFileAt" ref="data:json,dma_postForm" target="" action="http://127.0.0.1:8080/file/attachment"
        		method="delete" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler=""
        		mode="asynchronous" processMsg="" singleMode="true" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function() {
    $p.executeSubmission("sbm_categoryList1d");
	scwin.postFormInit();
};

	scwin.postFormInit = function() {
		sourceMedia.setDisabled(true);
		travelPlace.setDisabled(true);
		rd_isDisplay.setValue("Y");
		period.setValue("1m");
		startDate.setValue($p.getCurrentServerDate("yyyyMMddHHmmss"));

		var tmp = new Date();
		// 한달 추가
		tmp.setMonth(tmp.getMonth() + 1);
		var dateStr = WebSquare.date.getFormattedDate(tmp, "yyyyMMddHHmmss");
		
		endDate.setValue(dateStr);
	}
	
	// 전시일 체크
	scwin.checkDate = function() {
		var start = startDate.getValue(); //yyyyMMddHHmmss
    	var end = endDate.getValue();
    	var syear = parseInt(start.substring(2, 4), 10);
		var smonth = parseInt(start.substring(4, 6), 10);
		var sday = parseInt(start.substring(6, 8), 10);
		var eyear = parseInt(end.substring(2, 4), 10);
		var emonth = parseInt(end.substring(4, 6), 10);
		var eday = parseInt(end.substring(6, 8), 10);
    	
    	if ((start !== "" && end === "")) {
    		alert("검색 종료일시를 입력해주십시오.");
	    	return true;
	    }
	    
	    if ((start === "" && end !== "")) {
    		alert("검색 시작일시를 입력해주십시오.");
	    	return true;
	    }
	    
	    // 날짜 유효성 체크
	    if (smonth < 1 || smonth > 12 || emonth < 1 || emonth > 12) {
			alert("존재하지 않는 월을 입력하셨습니다.");
			return true;
		}
	
		if (sday < 1 || sday > 31 || eday < 1 || eday > 31) {
			alert("존재하지 않는 일을 입력하셨습니다.");
			return true;
		}
	
		 //30일 이하만 있는 달
		if (((smonth === 4 || smonth === 6 || smonth === 9 || smonth === 11) && sday === 31)
				|| ((emonth === 4 || emonth === 6 || emonth === 9 || emonth === 11) && eday === 31)) {
			alert("해당 월에는 31일이 존재하지 않습니다.");
			return true;
		}
	
		 //윤년 확인
		if (smonth === 2) {
			if (scwin.is_leap(syear, sday)) {
				return true;
			}
		}
		
		if (emonth === 2) {
			if (scwin.is_leap(eyear, eday)) {
				return true;
			}
		}

		if (start > end) {
	        alert("전시 시작일이 종료일보다 클 수 없습니다.");
	        return true;
    	}

    	return false;
	}
	
	// 윤년 확인
	scwin.is_leap = function(year, day) {
		var isLeap = (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));
			if (day > 29 || (day === 29 && !isLeap)) {
				alert("해당연도 2월에는 입력하신 일이 존재하지 않습니다.");
				return true;
			}
	}
	
	// 카테고리 1d 변경될 때마다 2d 조회
	scwin.parentId_onchange = function() {
		travelPlace.setDisabled(true);
		dma_postForm.set("category1", parentId.getValue());
		$p.executeSubmission("sbm_categoryList2d");
		
		// 카테고리1d가 지식일 경우 출처매체 입력 가능
		if (dma_postForm.get("category1") === 2) {
			sourceMedia.setDisabled(false);
		} else {
			sourceMedia.setDisabled(true);
		}
	};
	
	// 카테고리2d가 여행일 경우 추천 여행지 입력 가능
	scwin.category2_onchange = function() {
		if (dma_postForm.get("category2") == "3") {
			travelPlace.setDisabled(false);
		} else {
			travelPlace.setDisabled(true);
		}
	};

	scwin.btn_save_onclick = function(e) {
		
		var rawTitle = dma_postForm.get("title");
    	dma_postForm.set("title", scwin.escapeHtml(rawTitle));
		
		if (!scwin.is_exist_data()) { // 필수정보 등록 여부 확인
			return;
		}
		
		//카테고리 1d가 지식일 경우
		if (parentId.getValue() == 2) {
			
			if (gnt_add.getLength() < 1) {
				alert("출처 매체를 1개 이상 입력해주세요.");
				return;
			}
			//출처 매체
			for (var i = 1; i <= gnt_add.getLength(); i++) {
				var sourceMediaIdx = "sourceMedia" + i;
				
				
				if (gnt_add.getChild(i-1, "input_sm").getValue() === "") {
					alert("출처 매체 내용을 입력해주세요.");
					return;
				}
				
				dma_postForm.set(sourceMediaIdx, gnt_add.getChild(i-1, "input_sm").getValue());	
			}
		}
		
		// 카테고리 2d가 여행일 경우
		if (category2.getValue() == 3) {
			for (var i = 1; i <= dlt_travelPlaceList.getRowCount(); i++) {
				var travelPlaceIdx = "travelPlace" + i;
				
				dma_postForm.set(travelPlaceIdx, dlt_travelPlaceList.getCellData(i-1, "travelPlaceId"));
			}
		}
		
		$p.executeSubmission("sbm_createPost");
		$p.url("/post_list.xml");
		
	};
	
	// 필수 내용 등록 여부 확인
	scwin.is_exist_data = function() {
		
		var isPcUploaded = upd_singleFileUpload_pc.getValue() !== "";
	    var isMobileUploaded = upd_singleFileUpload_mo.getValue() !== "";
	    var isTitleExist = dma_postForm.get("title") !== "";
	    var isPcAtExist = dma_postForm.get("pcImageAltText") !== "";
	    var isMoAtExist = dma_postForm.get("mobileImageAltText") !== "";
	    var isDisplaySExist = dma_postForm.get("displayStart") !== "";
	    var isDisplayEExist = dma_postForm.get("displayEnd") !== "";
	    var isDisPlaySEValid = true;
	    // 내용
		dma_postForm.set("content", edt_content.getHTML());	
		
		var isContentExist = dma_postForm.get("content") !== "";
		
		if (!isTitleExist) {
	    	alert("제목을 입력해주세요.");
	    	return;
		}
		
		if (!isDisplaySExist) {
	    	alert("전시시작일을 입력해주세요.");
	    	return;
		}
		
		if (!isDisplayEExist) {
	    	alert("전시종료일을 입력해주세요.");
	    	return;
		}
		
		if (scwin.checkDate()) {
			return;
		}
		
		if (!isContentExist) {
	    	alert("내용을 입력해주세요.");
	    	return;
		}
	
		if (!isPcUploaded) {
	        alert("PC 이미지를 등록해주세요.");
	        return;
	    }
	    
	    if (!isPcAtExist) {
	        alert("PC 이미지 대체 텍스트를 등록해주세요.");
	        return;
	    }
	
	    if (!isMobileUploaded) {
	        alert("Mobile 이미지를 등록해주세요.");
	        return;
	    }
	    
	    if (!isMoAtExist) {
	        alert("Mobile 이미지 대체 텍스트를 등록해주세요.");
	        return;
	    }
	    
	    return isTitleExist && isDisplaySExist && isContentExist && isDisPlaySEValid
	     && isDisplayEExist && isTitleExist && isPcAtExist && isMoAtExist && isPcUploaded && isMobileUploaded;
	}

	// 출처 매체 추가
	scwin.btn_add_media_onclick = function(e) {
		var tmpIdx = gnt_add.getLength();
		if (tmpIdx+1 > 3) {
			alert("3개까지 추가 가능합니다.");
			return;
		}
		
		gnt_add.insertChild();
		
	};
	
	scwin.btn_del_onclick = function(e) {
		var tmpIdx = this.getGeneratedIndex();
		gnt_add.removeChild(tmpIdx);
	};
	
	scwin.btn_add_travelPlace_onclick = function(e) {
		requires("uiplugin.popup");
		var options = {
			id : "addPopup",
			popupName : "장소 등록",
			type:"wframePopup",
			modal : true,
			width : 770,
			height : 590
		};
		
		var url = "/travelPlace_popup.xml";
		
		var data = {
                    callbackFn: "scwin.travelPlace_popup_callBack"
                };
                
		$p.openPopup(url, options, data);
	};
	
	scwin.travelPlace_popup_callBack = function(obj) {
		for (var i = 0; i < obj.length; i++) {
			console.log(obj[i]);
			dlt_travelPlaceList.setRowJSON(i, obj[i]);
			dlt_travelPlaceList.setCellData(i, "check", "0");
		}
	}
	
	//순번
	scwin.gridNoFormat = function(str, formattedValue, rowIdx, colIdx) {
    	return rowIdx+1;
	};
	
	scwin.btn_del_travelPlace_onclick = function(e) {
		var checkRowArr = dlt_travelPlaceList.getMatchedIndex("check","1");
		if (checkRowArr.length == 0) {
			alert("선택된 행이 없습니다.");
			return;
		}
		
		for (var i = checkRowArr.length - 1; i >= 0; i--) {
		    dlt_travelPlaceList.removeRow(checkRowArr[i]);
		}
	};
	
	// 파일 업로드
	scwin.upd_singleFileUpload_onInputValueChange = function(fileName) {
	    var targetId = this.getID();
	    console.log(targetId);
	
	    if (targetId.includes("upd_singleFileUpload_pc")) {
	        upd_singleFileUpload_pc.changeFormAction("http://localhost:8080/file/pc");
	        upd_singleFileUpload_pc.submit();
	    } else if (targetId.includes("upd_singleFileUpload_mo")) {
	        upd_singleFileUpload_mo.changeFormAction("http://localhost:8080/file/mobile");
	        upd_singleFileUpload_mo.submit();
	    } else if (targetId.includes("upd_singleFileUpload_at")) {
	        upd_singleFileUpload_at.changeFormAction("http://localhost:8080/file/attachment");
	        upd_singleFileUpload_at.submit();
	    }
	};
	
	// 파일 삭제
	scwin.btn_DeleteFile_onclick = function(e) {
		var targetId = this.getID();
		console.log(targetId);
	    if (targetId.includes("btn_deleteFileP")) {
	        upd_singleFileUpload_pc.reset();
	        $p.executeSubmission("sbm_deleteFilePc");
	    } else if (targetId.includes("btn_deleteFileM")) {
	        upd_singleFileUpload_mo.reset();
	        $p.executeSubmission("sbm_deleteFileMo");
	    } else {
	        upd_singleFileUpload_at.reset();
	        $p.executeSubmission("sbm_deleteFileAt");
	    }
	};
	
	window.addEventListener("message", function(event) {
    if (event.data.type === "tempCallback") {
        console.log("Received File Data:", event.data.data);

        // XML 데이터를 파싱하여 UI 업데이트
        let parser = new DOMParser();
        let xmlDoc = parser.parseFromString(event.data.data, "text/xml");

        let uploadPath = xmlDoc.getElementsByTagName("uploadPath")[0].textContent;
        let saveFileName = xmlDoc.getElementsByTagName("saveFileName")[0].textContent;
        let originalFileName = xmlDoc.getElementsByTagName("OriginalFileName")[0].textContent;
        let fileSize = xmlDoc.getElementsByTagName("uploadFileSize")[0].textContent;

        console.log("Upload Path:", uploadPath);
        console.log("Saved File Name:", saveFileName);
        console.log("Original File Name:", originalFileName);
        console.log("File Size:", fileSize);
        
        if (uploadPath.includes("/images/pc")) {
	        dma_postForm.set("pcImageUrl", uploadPath);
            dma_postForm.set("pcImageOriginalName", originalFileName);
            dma_postForm.set("pcImageUploadedName", saveFileName);
            dma_postForm.set("pcImageSize", fileSize);
            isSetPc = true;
        } else if (uploadPath.includes("/images/mobile")) {
	        dma_postForm.set("mobileImageUrl", uploadPath);
            dma_postForm.set("mobileImageOriginalName", originalFileName);
            dma_postForm.set("mobileImageUploadedName", saveFileName);
            dma_postForm.set("mobileImageSize", fileSize);
            isSetMo = true;
        } else if (uploadPath.includes("/attachment")) {
	        dma_postForm.set("attachmentUrl", uploadPath);
            dma_postForm.set("attachmentOriginalName", originalFileName);
            dma_postForm.set("attachmentUploadedName", saveFileName);
            dma_postForm.set("attachmentSize", fileSize);
            isSetAt = true;
        }
    }
});
	
	// 이미지 미리보기
	scwin.btn_prvImage_onclick = function(e) {
		var targetId = this.getID();
		console.log(targetId);
		
		var url = "/post_imgPopup.xml";
		var path = "";
		
		if (targetId.includes("btn_previewImgPc")) {
			path = dma_postForm.get("pcImageUrl");
		} else {
			path = dma_postForm.get("mobileImageUrl");
		}
		
		var rowJSON = {
		  "src": path,
		  "targetId": targetId,
		  "callbackFn": "btn_DeleteFile_callBack"
		};
		
		var data = {
				"type": "json",
				  "name": "param",
				  "data": rowJSON
                };
                
        requires("uiplugin.popup");
		var options = {
			id : "previewImg",
			popupName : "이미지 미리보기",
			modal : true,
			width : 700,
			height: 500,
			type : "wframePopup",
			dataObject: data
		};
                
		$p.openPopup(url, options, data);
	};
	
	// 파일 삭제 콜백
	scwin.btn_DeleteFile_callBack = function(targetId) {
		//console.log("삭제할 타겟 ID는: " + targetId);
	    if (targetId.includes("btn_previewImgPc")) {
	        upd_singleFileUpload_pc.reset();
	        $p.executeSubmission("sbm_deleteFilePc");
	    } else {
	        upd_singleFileUpload_mo.reset();
	        $p.executeSubmission("sbm_deleteFileMo");
	    } 
	};
	
	// 게시글 미리보기
	scwin.btn_prev_onclick = function(e) {
		newTitle = scwin.escapeHtml(dma_postForm.get("title"));
    	console.log(newTitle);
    	
		var url = "";
		
		var rowJSON = {
		  "title": newTitle
		};
		
		var data = {
				"type": "json",
				  "name": "param",
				  "data": rowJSON
                };
		
		requires("uiplugin.popup");
		var options = {
			id : "previewPost",
			popupName : "게시글 미리보기",
			modal : true,
			width : 800,
			height: 590,
			type : "wframePopup",
			dataObject: data
		};
		
		if (dma_postForm.get("category1") == 2) {
			url = "/post_preview_knowledge.xml";
		} else if (dma_postForm.get("category2") == 3) {
			url = "/post_preview_travel.xml";
		} else {
			url = "/post_preview_standard.xml";
		}
		
		$p.openPopup(url, options, data);
		
	};

	// 전시기간 셀렉트박스
	scwin.period_onchange = function() {
		var selected = period.getValue();
		var tmp = new Date();
		
		if (selected === "7d") {
			tmp.setDate(tmp.getDate() + 7);
		} else if (selected === "1m") {
			tmp.setMonth(tmp.getMonth() + 1);
		} else if (selected === "3m") {
			tmp.setMonth(tmp.getMonth() + 3);
		} else if (selected === "6m") {
			tmp.setMonth(tmp.getMonth() + 6);
		} else if (selected === "1y") {
			tmp.setYear(tmp.getYear() + 1);
		}

		var dateStr = WebSquare.date.getFormattedDate(tmp, "yyyyMMddHHmmss");
		
		endDate.setValue(dateStr);
	};
	
	scwin.escapeHtml = function(str) {
	    if (!str) return "";
	    return str
	        .replace(/&/g, '&amp;')
	        .replace(/</g, '&lt;')
	        .replace(/>/g, '&gt;')
	        .replace(/"/g, '&quot;')
	        .replace(/'/g, '&#39;');
	};
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group class="sub_wrapper" id="" style="">
    		<w2:wframe class="page_header" id="" scope="true" src="../../../common/xml/wf_titleFav.xml" style=""></w2:wframe>
    		<xf:group class="page_contents" id="" style=""></xf:group>
    	</xf:group>

    	<xf:group id="" style="margin-top: 20px; margin-bottom: 20px;">
    		<w2:textbox id="" label="게시글 등록" style="" tagname="h3" class="title"></w2:textbox>
    	</xf:group>
    	<xf:group id="" style="" tagname="section">
    		<xf:group class="tbbox" id="" style="">
    			<xf:group class="w2tb tb" id="" style=";width:100%;" tagname="table">
    				<w2:attributes>
    					<w2:summary></w2:summary>
    				</w2:attributes>
    				<xf:group tagname="caption">디테일&amp;nbsp;테이블(2단)</xf:group>
    				<xf:group tagname="colgroup">
    					<xf:group style="width:13.47%;" tagname="col"></xf:group>
    					<xf:group tagname="col" style="width:10%;"></xf:group>
    					<xf:group tagname="col"></xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">

    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="구분" style="" tagname="label"></w2:textbox>


    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:select1 id="selectCategory" chooseOption=""
    							style="position:static; top:151px; left:266px; width:148px; height:21px; ;text-align:left;" submenuSize="auto" allOption=""
    							disabled="false" direction="auto" appearance="minimal" disabledClass="w2selectbox_disabled" ref="data:dma_postForm.type"
    							chooseOptionLabel="선택">
    							<xf:choices>
    								<xf:item>
    									<xf:label><![CDATA[일반]]></xf:label>
    									<xf:value><![CDATA[1]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[공지]]></xf:label>
    									<xf:value><![CDATA[0]]></xf:value>
    								</xf:item>
    							</xf:choices>
    						</xf:select1>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="카테고리" style="" tagname="label"></w2:textbox>

    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:select1 allOption="" appearance="minimal" chooseOption="" chooseOptionLabel="선택" direction="auto"
    							disabled="false" disabledClass="w2selectbox_disabled" id="parentId" ref="data:dma_parentCategory.parentId"
    							style="position:static; top:151px; left:266px; width:148px; height:21px;text-align:left;margin-right: 10px;" submenuSize="auto"
    							ev:onchange="scwin.parentId_onchange">
    							<xf:choices>
    								<xf:itemset nodeset="data:dlt_categoryList1d">
    									<xf:label ref="categoryName"></xf:label>
    									<xf:value ref="categoryId"></xf:value>
    								</xf:itemset>
    							</xf:choices>
    						</xf:select1>
    						<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="선택" direction="auto"
    							disabled="false" disabledClass="w2selectbox_disabled" id="category2" ref="data:dma_postForm.category2"
    							style="position:static; top:151px; left:266px; width:148px; height:21px; ;text-align:left;" submenuSize="auto"
    							ev:onchange="scwin.category2_onchange">
    							<xf:choices>
    								<xf:itemset nodeset="data:dlt_categoryList2d">
    									<xf:label ref="categoryName"></xf:label>
    									<xf:value ref="categoryId"></xf:value>
    								</xf:itemset>
    							</xf:choices>
    						</xf:select1>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="제목" style="" tagname="label"></w2:textbox>

    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:input adjustMaxLength="false" id="title" style="width:87.77%;height:21px;margin-right:10px;" ref="data:dma_postForm.title"
    							maxlength="50" ev:onchange="scwin.title_onchange">
    						</xf:input>
    						<w2:textbox class="explain" id="textbox14" label="최대 50자" style="margin-right: 10px;" tagname="span"></w2:textbox>

    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="전시 여부" style="" tagname="label"></w2:textbox>

    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:select1 appearance="full" cols="2" id="rd_isDisplay" mandatory="true" ref="data:dma_postForm.isDisplayed" rows=""
    							selectedIndex="-1" style="width: 150px;height: 21px;">
    							<xf:choices>
    								<xf:item>
    									<xf:label><![CDATA[Y]]></xf:label>
    									<xf:value><![CDATA[Y]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[N]]></xf:label>
    									<xf:value><![CDATA[N]]></xf:value>
    								</xf:item>
    							</xf:choices>
    						</xf:select1>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="전시 기간 " style="" tagname="label"></w2:textbox>

    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>

    						<w2:inputCalendar calendarValueType="yearMonthDateTimeSec" focusOnDateSelect="false" footerDiv="false"
    							id="startDate" ref="data:dma_postForm.displayStart" renderDiv="true" renderType="component" rightAlign="false"
    							style="width:200px;height:23px;">
    						</w2:inputCalendar>
    						<w2:span id="wave" label=" ~ " style=""></w2:span>
    						<w2:inputCalendar calendarValueType="yearMonthDateTimeSec" focusOnDateSelect="false" footerDiv="false"
    							id="endDate" ref="data:dma_postForm.displayEnd" renderDiv="true" renderType="component" rightAlign="false"
    							style="width:200px;height:23px;margin-right: 10px;">
    						</w2:inputCalendar>
    						<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="직접입력" direction="auto"
    							disabled="false" disabledClass="w2selectbox_disabled" id="period" ref=""
    							style="position:static; top:151px; left:266px; width:148px; height:21px; ;text-align:left;" submenuSize="auto"
    							ev:onchange="scwin.period_onchange">
    							<xf:choices>
    								<xf:item>
    									<xf:label><![CDATA[7일]]></xf:label>
    									<xf:value><![CDATA[7d]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[1개월]]></xf:label>
    									<xf:value><![CDATA[1m]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[3개월]]></xf:label>
    									<xf:value><![CDATA[3m]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[6개월]]></xf:label>
    									<xf:value><![CDATA[6m]]></xf:value>
    								</xf:item>
    								<xf:item>
    									<xf:label><![CDATA[1년]]></xf:label>
    									<xf:value><![CDATA[1y]]></xf:value>
    								</xf:item>
    							</xf:choices>
    						</xf:select1>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="내용" style="" tagname="label"></w2:textbox>

    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:editor id="edt_content" style="height: 250px;"></w2:editor>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr" id="sourceMedia">
    					<xf:group class="w2tb_th" style="" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="" id="" label="출처 매체" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:trigger class="" id="btn_add_media" style="margin-right: 10px;" type="button" ev:onclick="scwin.btn_add_media_onclick">
    							<xf:label><![CDATA[ +추가 ]]></xf:label>
    						</xf:trigger>


    						<w2:textbox class="explain" id="textbox15" label="1개 입력 필수, 최대 3개" style="margin-right: 10px;" tagname="span"></w2:textbox>
    						<w2:generator style="width:693px;height:100px;" id="gnt_add">
    							<xf:group id="">
    								<xf:input adjustMaxLength="false" style="width:604px;height:21px;margin-right: 10px;" id="input_sm"
    									ref="data:dlt_sourceMediaList">
    								</xf:input>
    								<xf:trigger style="" id="btn_del" type="button" ev:onclick="scwin.btn_del_onclick" class="">
    									<xf:label><![CDATA[ -삭제 ]]></xf:label>
    								</xf:trigger>
    							</xf:group>
    						</w2:generator>

    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr" id="travelPlace">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="" id="" label="추천 여행지" style="" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<xf:trigger class="" id="btn_add_travelPlace" style="margin-right: 10px;" type="button"
    							ev:onclick="scwin.btn_add_travelPlace_onclick">
    							<xf:label><![CDATA[ +장소등록 ]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="" ev:onclick="scwin.btn_del_travelPlace_onclick" id="btn_del_travelPlace" style="margin-right: 10px;"
    							type="button">
    							<xf:label><![CDATA[ -선택삭제 ]]></xf:label>
    						</xf:trigger>
    						<w2:textbox class="explain" id="textbox16" label="최대 5개" style="margin-right: 10px;" tagname="span"></w2:textbox>
    						<w2:gridView autoFit="allColumn" dataList="data:dlt_travelPlaceList" defaultCellHeight="32" focusMode="row"
    							id="grd_main" rowNumVisible="false" scrollByColumn="false" scrollByColumnAdaptive="false" sortable="true"
    							style="height:98px;margin-top: 10px;" visibleRowNum="all">
    							<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    							<w2:header id="header1" style="">
    								<w2:row id="row1" style="">
    									<w2:column id="column13" inputType="checkbox" style="height:32px;" value="체크여부" width="16"></w2:column>
    									<w2:column blockSelect="false" displayMode="label" id="column27" inputType="text"
    										removeBorderStyle="false" style="height:32px;" value="번호" width="16">
    									</w2:column>
    									<w2:column id="column14" style="height:32px;" value="장소" width="56"></w2:column>
    									<w2:column id="column15" style="height:32px;" value="주소" width="94"></w2:column>
    									<w2:column id="column20" style="height:32px;" value="상세주소" width="70"></w2:column>
    									<w2:column id="column21" style="height:32px;" value="등록일시" width="70"></w2:column>
    									<w2:column id="column16" style="height:32px;" value="등록자" width="70"></w2:column>
    									<w2:column id="column17" style="height:32px;" value="수정일시" width="70"></w2:column>
    									<w2:column id="column18" style="height:32px;" value="수정자" width="70"></w2:column>
    									<w2:column id="column19" style="height:32px;" value="장소 id" width="70" hidden="true"></w2:column>
    								</w2:row>
    							</w2:header>
    							<w2:gBody id="gBody1" style="">
    								<w2:row id="row2" style="">
    									<w2:column id="check" inputType="checkbox" width="16"></w2:column>
    									<w2:column blockSelect="false" customFormatter="scwin.gridNoFormat" displayMode="label" id="rowNo"
    										inputType="text" removeBorderStyle="false" style="height:32px" value="" width="16">
    									</w2:column>
    									<w2:column id="travelPlaceName" width="56"></w2:column>
    									<w2:column removeBorderStyle="false" width="94" inputType="text" style="height:32px" id="addr"
    										value="" blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:32px" id="detailAddr"
    										value="" blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column calendarValueType="yearMonthDateTimeSec" id="createdAt" inputType="calendar"
    										readOnly="true" width="70">
    									</w2:column>
    									<w2:column id="createdBy" readOnly="true" width="70"></w2:column>
    									<w2:column calendarValueType="yearMonthDateTimeSec" id="updatedAt" inputType="calendar"
    										readOnly="true" width="70">
    									</w2:column>
    									<w2:column id="updatedBy" readOnly="true" width="70"></w2:column>
    									<w2:column id="travelPlaceId" readOnly="true" width="70"></w2:column>
    								</w2:row>
    							</w2:gBody>
    						</w2:gridView>
    						<w2:textbox class="explain" id="" label="장소 등록 후 [변경사항 저장] 버튼을 클릭해야 변경내용이 반영됩니다." style="" tagname="p"></w2:textbox>


    					</xf:group>
    				</xf:group>
    				<xf:group tagname="tr" style="">
    					<xf:group tagname="th" class="w2tb_th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    							<w2:colspan>1</w2:colspan>
    							<w2:rowspan>2</w2:rowspan>
    						</w2:attributes>


    						<w2:textbox class="req" id="" label="PC 이미지 등록" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group tagname="th" class="w2tb_th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="이미지" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group tagname="td" class="w2tb_td">
    						<w2:attributes></w2:attributes>
    						<w2:upload imageStyle="position:absolute;vertical-align:middle;word-wrap:break-word" accept=".jpeg, .gif, .png, .jpg"
    							inputStyle="position:absolute;vertical-align:middle;word-wrap:break-word" style="width: 250px;height: 23px;margin-right: 20px;" id="upd_singleFileUpload_pc" ev:onInputValueChange="scwin.upd_singleFileUpload_onInputValueChange">
    						</w2:upload>

    						<xf:trigger class="" ev:onclick="scwin.btn_DeleteFile_onclick" id="btn_deleteFileP"
    							style="margin-right: 10px;" type="button" userData3="P">
    							<xf:label><![CDATA[ -파일삭제 ]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="" disabled="" ev:onclick="scwin.btn_prvImage_onclick" id="btn_previewImgPc" style=""
    							type="button">
    							<xf:label><![CDATA[ 미리보기 ]]></xf:label>
    						</xf:trigger>

    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="" tagname="th">
    						<w2:attributes>
    							<w2:colspan>1</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="대체 텍스트" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group tagname="td" class="w2tb_td">
    						<w2:attributes></w2:attributes>
    						<xf:input adjustMaxLength="false" class="wd-150" id="mmTadvFixAmt10" maxByteLength="20"
    							maxlength="20" ref="data:dma_postForm.pcImageAltText" style="text-align:left;width:95%;">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    							<w2:colspan>1</w2:colspan>
    							<w2:rowspan>2</w2:rowspan>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="Mobile 이미지 등록" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_th" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="이미지" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes></w2:attributes>
    						<w2:upload imageStyle="position:absolute;vertical-align:middle;word-wrap:break-word" accept=".jpeg, .gif, .png, .jpg"
    							inputStyle="position:absolute;vertical-align:middle;word-wrap:break-word" style="width: 250px;height: 23px;margin-right: 20px;" id="upd_singleFileUpload_mo" ev:onInputValueChange="scwin.upd_singleFileUpload_onInputValueChange">
    						</w2:upload>
    						<xf:trigger class="" ev:onclick="scwin.btn_DeleteFile_onclick" id="btn_deleteFileM"
    							style="margin-right: 10px;" type="button" userData3="P">
    							<xf:label><![CDATA[ -파일삭제 ]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="" disabled="" ev:onclick="scwin.btn_prvImage_onclick" id="btn_previewImgMo" style=""
    							type="button">
    							<xf:label><![CDATA[ 미리보기 ]]></xf:label>
    						</xf:trigger>


    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="" tagname="th">
    						<w2:attributes>
    							<w2:colspan>1</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:textbox class="req" id="" label="대체 텍스트" style="float:right;clear:none;" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes></w2:attributes>
    						<xf:input adjustMaxLength="false" class="wd-150" id="mmTadvFixAmt20" maxByteLength="20"
    							maxlength="20" ref="data:dma_postForm.mobileImageAltText" style="text-align:left;width:95%;">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" style="text-align:right;" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox class="" id="" label="첨부파일" style="" tagname="label"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes>
    							<w2:colspan>2</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:upload id="upd_singleFileUpload_at"
    							imageStyle="position:absolute;vertical-align:middle;word-wrap:break-word"
    							inputStyle="position:absolute;vertical-align:middle;word-wrap:break-word" style="width: 250px;height: 23px;margin-right: 20px;"
    							ev:onInputValueChange="scwin.upd_singleFileUpload_onInputValueChange" accept=".pdf, .docx, .csv, .txt, .xlsx">
    						</w2:upload>
    						<xf:trigger class="" ev:onclick="scwin.btn_DeleteFile_onclick" id="btn_deleteFileA"
    							style="margin-right: 10px;" type="button" userData3="P">
    							<xf:label><![CDATA[ -파일삭제 ]]></xf:label>
    						</xf:trigger>


    						<w2:textbox class="explain" id="textbox17" label=".pdf, .docx, .csv, .xlsx, .txt 만 가능합니다." style="margin-right: 10px;" tagname="span"></w2:textbox>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    	<br></br>

    	<xf:group id="" style="text-align:right;" tagname="">
    		<xf:trigger class="purple-button" id="btn_prev" style="margin-right: 10px;" type="button" ev:onclick="scwin.btn_prev_onclick">
    			<xf:label><![CDATA[ 미리보기 ]]></xf:label>
    		</xf:trigger>
    		<xf:trigger class="purple-button" ev:onclick="scwin.btn_save_onclick" id="trigger24" style="margin-right: 10px;" type="button">
    			<xf:label><![CDATA[ 저장 ]]></xf:label>
    		</xf:trigger>
    	</xf:group>
    	
    </body>
</html>
